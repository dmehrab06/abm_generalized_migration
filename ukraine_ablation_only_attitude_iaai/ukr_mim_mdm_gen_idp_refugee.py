all_places = ["Volnovakhs'kyi", "Mykolaivs'kyi", "Beryslavs'kyi", "Novomoskovs'kyi", "Chernihivs'kyi", "Cherkas'kyi", "Kremenchuts'kyi", "Pryluts'kyi", "Volodymyr-Volyns'kyi", "Heniches'kyi", "Bolhrads'kyi", "Kovel's'kyi", "Nizhyns'kyi", "Kamyans'kyi", "Melitopol's'kyi", "Khmel'nyts'kyi", "Sums'kyi", "Polohivs'kyi", "Skadovs'kyi", "Kupyans'kyi", "Bakhchysarais'kyi", "Olevs'kyi", "Rozdil'nians'kyi", "Berdians'kyi", "Vyshhorods'kyi", "Lozivs'kyi", "Kryvoriz'kyi", "Myrhorods'kyi", "Voznesens'kyi", "Svativs'kyi", "Starobil's'kyi", "Konotops'kyi", "Bohodukhivs'kyi", "Kharkivs'kyi", "Oleksandriis'kyi", "Bakhmats'kyi", "Nikopol's'kyi", "Khmil'nyts'kyi", "Pervomais'kyi", "Obukhivs'kyi", "Novohrad-Volyns'kyi", "Bashtans'kyi", "Bilhorod-Dnistrovs'kyi", "Umans'kyi", "Poltavs'kyi", "Kremenets'kyi", "Pavlohrads'kyi", "Tiachivs'kyi", "Boryspil's'kyi", "Bilohirs'kyi", "Korostens'kyi", "Vasylivs'kyi", "Sarnens'kyi", "Luts'kyi", "Mukachivs'kyi", "Simferopol's'kyi", "Ternopil's'kyi", "Fastivs'kyi", "Kalus'kyi", "Romens'kyi", "Krasnohrads'kyi", "Shostkyns'kyi", "Rivnens'kyi", "Chortkivs'kyi", "Dzhankois'kyi", "Nadvirnians'kyi", "Vinnyts'kyi", "Novhorod-Sivers'kyi", "Izmail's'kyi", "Koriukivs'kyi", "Iziums'kyi", "Luhyns'kyi", "Okhtyrs'kyi", "Buchats'kyi", "Pokrovs'kyi", "Zhmeryns'kyi", "Yavorivs'kyi", "Zaporiz'kyi", "Berdychivs'kyi", "Synel'nykivs'kyi", "Zolochivs'kyi", "Berezivs'kyi", "Kakhovs'kyi", "Zhytomyrs'kyi", "Chernivets'kyi", "Lubens'kyi", "Zolotonis'kyi", "Bilotserkivs'kyi", "Dubens'kyi", "Brovars'kyi", "Shepetivs'kyi", "Chuhuivs'kyi", "Yahotyns'kyi", "Stryis'kyi", "Sambirs'kyi"]

#all_ids = [160024697, 160024453, 160024616, 160024596, 160024522, 160024477, 160024565, 160024224, 160024317, 160024605, 160024438, 160024323, 160024533, 160024480, 160024645, 160024656, 160024353, 160024553, 160024655, 160024626, 160024229, 160024620, 160024381, 160024450, 160024640, 160024388, 160024663, 160024582, 160024569, 160024506, 160024712, 160024716, 160024546, 160024674, 160024677, 160024493, 160024535, 160024586, 160024418, 160024668, 160024403, 160024374, 160024514, 160024441, 160024236, 160024469, 160024577, 160024283, 160024599, 160024246, 160024406, 160024359, 160024622, 160024625, 160024382, 160024647, 160024343, 160024318, 160024255, 160024621, 160024279, 160024393, 160024267, 160024547, 160024660, 160024542, 160024337, 160024275, 160024612, 160024262, 160024422, 160024528, 160024437, 160024526, 160024666, 160024383, 160024555, 160024272, 160024600, 160024420, 160024302, 160024648, 160024371, 160024598, 160024508, 160024304, 160024675, 160024452, 160024631, 160024372, 160024414, 160024563, 160024465, 160024400, 160024332, 160024308, 160024392, 160024230, 160024678, 160024409, 160024298, 160024300]

all_ids = ['Kalmiuskyi', 'Synelnykivskyi', 'Fastivskyi', 'Khustskyi', 'Berezivskyi', 'Beryslavskyi', 'Dubenskyi', 'Novomoskovskyi', 'Shepetivskyi', 'Chernihivskyi', 'Chortkivskyi', 'Cherkaskyi', 'Melitopolskyi', 'Poltavskyi', 'Zaporizkyi', 'Volnovaskyi', 'Nizhynskyi', 'Kremenchutskyi', 'Prylutskyi', 'Volodymyrskyi', 'Henicheskyi', 'Starobilskyi', 'Kovelskyi', 'Sievierodonetskyi', 'Kropyvnytskyi', 'Kamianskyi', 'Khersonskyi', 'Zviahelskyi', 'Chernivetskyi', 'Khmelnytskyi', 'Bilotserkivskyi', 'Yavorivskyi', 'Bolhradskyi', 'Polohivskyi', 'Odeskyi', 'Sumskyi', 'Berdianskyi', 'Sarnenskyi', 'Varaskyi', 'Vyzhnytskyi', 'Rakhivskyi', 'Zhmerynskyi', 'Dovzhanskyi', 'Kamin-Kashyrskyi', 'Podilskyi', 'Haisynskyi', 'Skadovskyi', 'Rivnenskyi', 'Sambirskyi', 'Kupianskyi', 'Mariupolskyi', 'Kryvorizkyi', 'Bashtanskyi', 'Myrhorodskyi', 'Bakhchysaraiskyi', 'Voznesenskyi', 'Konotopskyi', 'Kamianets-Podilskyi', 'Chervonohradskyi', 'Lubenskyi', 'Izmailskyi', 'Korostenskyi', 'Rozdilnianskyi', 'Tulchynskyi', 'Vyshhorodskyi', 'Lozivskyi', 'Kramatorskyi', 'Lutskyi', 'Ternopilskyi', 'Koriukivskyi', 'Mykolaivskyi', 'Romenskyi', 'Svativskyi', 'Novoukrainskyi', 'Bilohirskyi', 'Khmilnytskyi', 'Umanskyi', 'Alchevskyi', 'Dniprovskyi', 'Zhytomyrskyi', 'Krasnoperekopskyi', 'Kolomyiskyi', 'Krasnohradskyi', 'Kakhovskyi', 'Berdychivskyi', 'Pervomaiskyi', 'Shchastynskyi', 'Bohodukhivskyi', 'Zvenyhorodskyi', 'Kharkivskyi', 'Vinnytskyi', 'Oleksandriiskyi', 'Uzhhorodskyi', 'Obukhivskyi', 'Zolochivskyi', 'Nikopolskyi', 'Horlivskyi', 'Lvivskyi', 'Donetskyi', 'Ivano-Frankivskyi', 'Kaluskyi', 'Iziumskyi', 'Krasnohvardiiskyi', 'Bilhorod-Dnistrovskyi', 'Pokrovskyi', 'Kremenetskyi', 'Brovarskyi', 'Yevpatoriiskyi', 'Buchanskyi', 'Stryiskyi', 'Novhorod-Siverskyi', 'Zolotoniskyi', 'Pavlohradskyi', 'Tiachivskyi', 'Boryspilskyi', 'Holovanivskyi', 'Drohobytskyi', 'Okhtyrskyi', 'Verkhovynskyi', 'Rovenkivskyi', 'Vasylivskyi', 'Yaltynskyi', 'Shostkynskyi', 'Dnistrovskyi', 'Mukachivskyi', 'Simferopolskyi', 'Mohyliv-Podilskyi', 'Chuhuivskyi', 'Feodosiiskyi', 'Dzhankoiskyi', 'Nadvirnianskyi', 'Bakhmutskyi', 'Berehivskyi', 'Kyiv', 'Luhanskyi', 'Kerchynskyi', 'Kosivskyi', 'Chornobyl Exclusion Zone', 'Sevastopol']

big_4 = ['Kharkivskyi','Odeskyi','Donetskyi','Kyiv']

sub_event_type = ['None','Shelling_or_artillery_or_missile_attack', 'Air_or_drone_strike', 'Peaceful_protest', 'Remote_explosive_or_landmine_or_IED', 'Armed_clash', 'Grenade', 'Abduction_or_forced_disappearance', 'Attack', 'Sexual_violence', 'Excessive_force_against_protesters', 'Looting_or_property_destruction', 'Protest_with_intervention', 'Non-state_actor_overtakes_territory', 'Change_to_group_or_activity', 'Disrupted_weapons_use', 'Agreement', 'Government_regains_territory', 'Non-violent_transfer_of_territory', 'Violent_demonstration', 'Mob_violence', 'Arrests', 'Headquarters_or_base_established']

import random
import time
import sys

random.seed(time.time())

# D = random.sample([1.0,1.5,2.0,4.0,5.0,8.0,10.0,20.0],1)[0] #1.5/2.0 ## kind of tuned
# A = random.sample([50.0,70.0,80.0,100.0,200.0,500.0],1)[0] #70.0 ## calibrated
# T = random.sample([0.1,0.5,0.8,1.0,1.5,2.0],1)[0] #0.8/1.0 ## calibrated
# S = random.sample([50.0,80.0,98.67,100.0],1)[0] #98.67 ## from paper

# time_choice = random.sample([[4,1],[7,1],[7,3],[14,1],[14,5],[14,7],[21,1],[21,7],[21,14],[21,18]],1)[0]
# t_l = time_choice[0]
# t_r = time_choice[1]

# ps = random.sample([0.2,0.5,0.8,1.0],1)[0] ##make this a parameter
# ews = random.sample([0.01,0.1,0.2,0.5,1,2,5,10],1)[0]
# pactive = random.sample([7,15,30,45,100],1)[0]

D = 2.212#random.uniform(1.0,10.0) #1.5/2.0 ## kind of tuned
A = 55.0#random.uniform(50.0,100.0) #70.0 ## calibrated
T = 0.253##random.uniform(0.5, 3.0) #0.8/1.0 ## calibrated
S = 98.67 #98.67 ## from paper

#time_choice = random.sample([[4,1],[7,1],[7,3],[14,1],[14,5],[14,7],[21,1],[21,7],[21,14],[21,18]],1)[0]
t_l = 18#random.sample([10,12,14,18,21],1)[0]
t_r = 7

ps = random.uniform(0.34,0.36)#0.21#random.uniform(0.4,1.0) ##make this a parameter
ews = random.uniform(0.32,0.36)
pactive = 40#random.randint(15,30)
peer_thresh_hi = 30#zrandom.randint(0,1)
peer_thresh_lo = 1
network_struct = 13
dynamic_network = 1
phase_shift = int(sys.argv[3])
use_neighbor = 5#random.sample([2,5,8,10],1)[0]#random.unifrom(0.0,1.0)
border_cross_prob = 0.25676486858191583#random.uniform(0.25,0.28)

#all_val_err =  [33, 29, 423, 367, 199, 8, 41, 69, 64, 15, 55, 38, 60, 1, 82, 28, 71, 30, 10, 4, 59, 13, 87, 47, 115, 36, 21, 49, 84, 9, 26, 171, 76, 27, 31, 56, 65, 20, 61, 48, 77, 3, 479, 43, 6, 451, 83, 37, 283, 227, 14, 395, 34, 32, 62, 57, 58, 5, 255, 75, 2, 54, 311, 339, 19, 66, 143]



hyper_comb = int(sys.argv[1])
comment = str(sys.argv[2])
incomplete = []


for name in all_ids:
    if name.startswith('Chornobyl'):
        print('sbatch ukr_mim_mdm_sample.sbatch','"'+name+'"',hyper_comb,D,A,T,S,t_l,t_r,ps,ews,pactive,peer_thresh_lo,peer_thresh_hi,network_struct,dynamic_network,use_neighbor,border_cross_prob,phase_shift)
    else:
        print('sbatch ukr_mim_mdm_sample.sbatch',name,hyper_comb,D,A,T,S,t_l,t_r,ps,ews,pactive,peer_thresh_lo,peer_thresh_hi,network_struct,dynamic_network,use_neighbor,border_cross_prob,phase_shift)
    #print('sbatch ukr_mim_mdm_sample.sbatch',name,hyper_comb+900,D,A,T,S,t_l,t_r,ps,ews,pactive,use_civil_data,'1')

for name in big_4:
    if name.startswith('Chornobyl'):
        print('sbatch ukr_mim_mdm_sample_big.sbatch','"'+name+'"',hyper_comb,D,A,T,S,t_l,t_r,ps,ews,pactive,peer_thresh_lo,peer_thresh_hi,network_struct,dynamic_network,use_neighbor,border_cross_prob,phase_shift)
    else:
        print('sbatch ukr_mim_mdm_sample_big.sbatch',name,hyper_comb,D,A,T,S,t_l,t_r,ps,ews,pactive,peer_thresh_lo,peer_thresh_hi,network_struct,dynamic_network,use_neighbor,border_cross_prob,phase_shift)
    #print('sbatch ukr_mim_mdm_sample.sbatch',name,hyper_comb+900,D,A,T,S,t_l,t_r,ps,ews,pactive,use_civil_data,'1')
    
import pandas as pd

df = pd.DataFrame(columns=['hyper_comb','DISTANCE_DECAY','SIGMOID_SCALAR','SIGMOID_EXPONENT','MEMORY_DECAY',
                           'TIME_LEFT','TIME_RIGHT','BIAS_SCALE','EVENT_WEIGHT_SCALE','PEER_AFFECT_ACTIVE_DAY','THRESH_HI','USE_NEIGHBOR','BORDER_CROSS_PROB','THRESH_LO','NETWORK_STRUCTURE','COMMENT'])

new_row = {'hyper_comb':hyper_comb,'DISTANCE_DECAY':D,'SIGMOID_SCALAR':A,'SIGMOID_EXPONENT':T,
           'MEMORY_DECAY':S,'TIME_LEFT':t_l,'TIME_RIGHT':t_r,
           'BIAS_SCALE':ps,'EVENT_WEIGHT_SCALE':ews,'PEER_AFFECT_ACTIVE_DAY':pactive,'THRESH_HI':peer_thresh_hi,'THRESH_LO':peer_thresh_lo,'NETWORK_STRUCTURE':network_struct,
           'USE_NEIGHBOR':use_neighbor,'BORDER_CROSS_PROB':border_cross_prob,
          'COMMENT':comment}

df = df.append(new_row,ignore_index=True)

df.to_csv('../runtime_log/parameter_comb_peer_effect.csv', mode='a', index=False, header=False)
                
